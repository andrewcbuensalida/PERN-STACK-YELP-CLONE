(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{63:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c(13),r=c.n(a),s=c(32),i=c(3),o=c(1),l=function(){return Object(o.jsx)("div",{children:Object(o.jsx)("h1",{className:"font-weight-light display-1 text-center",children:"Doctor db"})})},j=c(4),d=c.n(j),u=c(10),b=c(2),O=c(31),h=c.n(O).a.create({baseURL:"/api/v1/doctors"}),p=c(14),x=Object(n.createContext)(),m=function(e){var t=Object(n.useState)([]),c=Object(b.a)(t,2),a=c[0],r=c[1];return Object(o.jsx)(x.Provider,{value:{doctors:a,setDoctors:r,addDoctors:function(e){r([e].concat(Object(p.a)(a)))}},children:e.children})},v=function(){var e=Object(n.useContext)(x).addDoctors,t=Object(n.useState)(""),c=Object(b.a)(t,2),a=c[0],r=c[1],s=Object(n.useState)(""),i=Object(b.a)(s,2),l=i[0],j=i[1],O=Object(n.useState)("Price Range"),p=Object(b.a)(O,2),m=p[0],v=p[1],f=function(){var t=Object(u.a)(d.a.mark((function t(c){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c.preventDefault(),t.prev=1,t.next=4,h.post("/",{name:a,company:l,price_range:m});case 4:n=t.sent,console.log(n.data.data),e(n.data.data.doctor),r(""),j(""),v("Price Range"),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e){return t.apply(this,arguments)}}();return Object(o.jsx)("div",{className:"mb-4",children:Object(o.jsx)("form",{action:"",children:Object(o.jsxs)("div",{className:"form-row align-items-center",children:[Object(o.jsx)("div",{className:"col",children:Object(o.jsx)("input",{value:a,onChange:function(e){return r(e.target.value)},type:"text",className:"form-control",placeholder:"name"})}),Object(o.jsx)("div",{className:"col",children:Object(o.jsx)("input",{value:l,onChange:function(e){return j(e.target.value)},className:"form-control",type:"text",placeholder:"Company"})}),Object(o.jsx)("div",{className:"col",children:Object(o.jsxs)("select",{value:m,onChange:function(e){return v(e.target.value)},className:"custom-select my-1 mr-sm-2",children:[Object(o.jsx)("option",{disabled:!0,children:"Price Range"}),Object(o.jsx)("option",{value:"1",children:"$"}),Object(o.jsx)("option",{value:"2",children:"$$"}),Object(o.jsx)("option",{value:"3",children:"$$$"}),Object(o.jsx)("option",{value:"4",children:"$$$$"}),Object(o.jsx)("option",{value:"5",children:"$$$$$"})]})}),Object(o.jsx)("button",{onClick:f,type:"submit",className:"btn btn-primary",children:"Add"})]})})})},f=function(e){for(var t=e.rating,c=[],n=1;n<=5;n++)n<=t?c.push(Object(o.jsx)("i",{className:"fas fa-star text-warning"},n)):n!==Math.ceil(t)||Number.isInteger(t)?c.push(Object(o.jsx)("i",{className:"far fa-star text-warning"},n)):c.push(Object(o.jsx)("i",{className:"fas fa-star-half-alt text-warning"},n));return Object(o.jsx)(o.Fragment,{children:c})},g=function(e){var t=e.count,c=e.averageRating;return t?Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(f,{rating:c}),Object(o.jsxs)("span",{className:"text-warning ml-1",children:["(",t,")"]})]}):Object(o.jsx)("span",{className:"text-warning",children:"0 reviews"})},N=c(17),w=function(e){var t=e.isUpdateSeen,c=e.setIsUpdateSeen,a=e.doctor,r=Object(n.useState)(a.name),s=Object(b.a)(r,2),i=s[0],l=s[1],j=Object(n.useState)(a.company),O=Object(b.a)(j,2),p=O[0],x=O[1],m=Object(n.useState)(a.price_range),v=Object(b.a)(m,2),f=v[0],g=v[1],w=function(){var e=Object(u.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),t.stopPropagation(),e.next=4,h.put("/".concat(a.id),{name:i,company:p,price_range:f});case 4:n=e.sent,a.name=n.data.data.doctor.name,a.company=n.data.data.doctor.company,a.price_range=n.data.data.doctor.price_range,c(!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(o.jsx)("div",{onClick:function(e){return e.stopPropagation()},children:Object(o.jsxs)(N.a,{show:t,fullscreen:!0,onHide:function(e){c(!1)},children:[Object(o.jsxs)(N.a.Header,{children:[Object(o.jsx)(N.a.Title,{children:"Update Doctor"}),Object(o.jsx)("button",{onClick:function(e){e.stopPropagation(),c(!1)},type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:Object(o.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(o.jsx)(N.a.Body,{children:Object(o.jsxs)("form",{action:"",children:[Object(o.jsxs)("div",{className:"form-group",children:[Object(o.jsx)("label",{htmlFor:"name",children:"Name"}),Object(o.jsx)("input",{value:i,onChange:function(e){return l(e.target.value)},id:"name",className:"form-control",type:"text"})]}),Object(o.jsxs)("div",{className:"form-group",children:[Object(o.jsx)("label",{htmlFor:"company",children:"Company"}),Object(o.jsx)("input",{value:p,onChange:function(e){return x(e.target.value)},id:"company",className:"form-control",type:"text"})]}),Object(o.jsxs)("div",{className:"form-group col-4",children:[Object(o.jsx)("label",{htmlFor:"rating",children:"Price Range"}),Object(o.jsxs)("select",{value:f,onChange:function(e){return g(e.target.value)},id:"price_range",className:"custom-select",children:[Object(o.jsx)("option",{disabled:!0,children:"Price Range"}),Object(o.jsx)("option",{value:"1",children:"$"}),Object(o.jsx)("option",{value:"2",children:"$$"}),Object(o.jsx)("option",{value:"3",children:"$$$"}),Object(o.jsx)("option",{value:"4",children:"$$$$"}),Object(o.jsx)("option",{value:"5",children:"$$$$$"})]})]}),Object(o.jsx)("button",{type:"submit",onClick:w,className:"btn btn-primary",children:"Submit"})]})})]})})},y=function(e){var t=e.reviews;return Object(o.jsx)("div",{className:"row row-cols-3 mb-2",children:t.map((function(e){return Object(o.jsxs)("div",{className:"card text-white bg-primary mb-3 mr-4",style:{maxWidth:"30%"},children:[Object(o.jsxs)("div",{className:"card-header d-flex justify-content-between",children:[Object(o.jsx)("span",{children:e.name}),Object(o.jsx)("span",{children:Object(o.jsx)(f,{rating:e.rating})})]}),Object(o.jsx)("div",{className:"card-body",children:Object(o.jsx)("p",{className:"card-text",children:e.review})})]},e.id)}))})},$=function(e){var t=e.doctor,c=e.reviews,a=e.setIsReviewSeen,r=e.setReviews,s=e.count,i=e.setCount,l=e.averageRating,j=e.setAverageRating,O=Object(n.useState)(""),x=Object(b.a)(O,2),m=x[0],v=x[1],g=Object(n.useState)(""),N=Object(b.a)(g,2),w=N[0],$=N[1],C=Object(n.useState)("Rating"),R=Object(b.a)(C,2),S=R[0],k=R[1],D=function(){var e=Object(u.a)(d.a.mark((function e(c){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),e.prev=1,e.next=4,h.post("/".concat(t.id,"/addReview"),{name:m,review:w,rating:S});case 4:n=e.sent,s++,i(s),r((function(e){return[].concat(Object(p.a)(e),[n.data.data.review])})),j((function(e){return e*(s-1)/s+Number(S)*(1/s)})),v(""),k("Rating"),$(""),e.next=16;break;case 14:e.prev=14,e.t0=e.catch(1);case 16:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(o.jsxs)("div",{style:{position:"fixed",left:"0",right:"0",top:"0",bottom:"0",backgroundColor:"grey",padding:"20px",overflowY:"auto"},children:[Object(o.jsx)("button",{onClick:function(e){e.stopPropagation(),a(!1)},children:"X"}),Object(o.jsx)("h1",{className:"text-center display-1",children:t.name}),Object(o.jsxs)("div",{className:"text-center",children:[Object(o.jsx)(f,{rating:l}),Object(o.jsx)("span",{className:"text-warning ml-1",children:"(".concat(s||0,")")})]}),Object(o.jsx)("div",{className:"mt-3",children:Object(o.jsx)(y,{reviews:c})}),Object(o.jsx)("div",{className:"mb-2",children:Object(o.jsxs)("form",{action:"",children:[Object(o.jsxs)("div",{className:"form-row",children:[Object(o.jsxs)("div",{className:"form-group col-8",children:[Object(o.jsx)("label",{htmlFor:"name",children:"Name"}),Object(o.jsx)("input",{value:m,onChange:function(e){return v(e.target.value)},id:"name",placeholder:"name",type:"text",className:"form-control"})]}),Object(o.jsxs)("div",{className:"form-group col-4",children:[Object(o.jsx)("label",{htmlFor:"rating",children:"Rating"}),Object(o.jsxs)("select",{value:S,onChange:function(e){return k(e.target.value)},id:"rating",className:"custom-select",children:[Object(o.jsx)("option",{disabled:!0,children:"Rating"}),Object(o.jsx)("option",{value:"1",children:"1"}),Object(o.jsx)("option",{value:"2",children:"2"}),Object(o.jsx)("option",{value:"3",children:"3"}),Object(o.jsx)("option",{value:"4",children:"4"}),Object(o.jsx)("option",{value:"5",children:"5"})]})]})]}),Object(o.jsxs)("div",{className:"form-group",children:[Object(o.jsx)("label",{htmlFor:"Review",children:"Review"}),Object(o.jsx)("textarea",{value:w,onChange:function(e){return $(e.target.value)},id:"Review",className:"form-control"})]}),Object(o.jsx)("button",{type:"submit",onClick:D,className:"btn btn-primary",children:"Submit"})]})})]})};var C=function(e){var t=e.doctor,c=(e.setDoctors,Object(n.useState)(!1)),a=Object(b.a)(c,2),r=a[0],s=a[1],i=Object(n.useState)(null),l=Object(b.a)(i,2),j=l[0],O=l[1],p=Object(n.useState)(!0),x=Object(b.a)(p,2),m=x[0],v=x[1],f=Object(n.useState)(!1),N=Object(b.a)(f,2),y=N[0],C=N[1],R=Object(n.useState)(!1),S=Object(b.a)(R,2),k=S[0],D=S[1],P=Object(n.useState)([]),_=Object(b.a)(P,2),E=_[0],F=_[1];t.count=t.count||0;var U=Object(n.useState)(Number(t.count)),I=Object(b.a)(U,2),A=I[0],H=I[1];t.average_rating=t.average_rating||0;var L=Object(n.useState)(Number(t.average_rating)),B=Object(b.a)(L,2),J=B[0],T=B[1];Object(n.useEffect)((function(){var e=function(){var e=Object(u.a)(d.a.mark((function e(){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.get("/".concat(t.id));case 3:c=e.sent,F(c.data.data.reviews),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),O(e.t0);case 10:return e.prev=10,s(!0),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);var M=function(){var e=Object(u.a)(d.a.mark((function e(t,c){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.stopPropagation(),e.prev=1,v(!1),e.next=5,h.delete("/".concat(c));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,c){return e.apply(this,arguments)}}();return console.log("individual rendered"),j?Object(o.jsxs)("div",{children:["Error: ",j.message]}):r?m&&Object(o.jsxs)("tr",{id:t.id,style:{cursor:"pointer"},onClick:function(e){D(!0)},children:[k&&Object(o.jsx)($,{setIsReviewSeen:D,doctor:t,reviews:E,setReviews:F,count:A,setCount:H,averageRating:J,setAverageRating:T}),Object(o.jsx)("td",{children:t.name}),Object(o.jsx)("td",{children:t.company}),Object(o.jsx)("td",{children:"$".repeat(t.price_range)}),Object(o.jsx)("td",{children:Object(o.jsx)(g,{count:A,averageRating:J})}),Object(o.jsxs)("td",{children:[Object(o.jsx)("button",{onClick:function(e){return function(e){e.stopPropagation(),C(!0)}(e)},className:"btn btn-warning",children:"Update"}),y&&Object(o.jsx)(w,{isUpdateSeen:y,setIsUpdateSeen:C,doctor:t})]}),Object(o.jsx)("td",{children:Object(o.jsx)("button",{onClick:function(e){return M(e,t.id)},className:"btn btn-danger",children:"Delete"})})]},t.id):Object(o.jsx)("h4",{children:"Loading..."})},R=function(){var e=Object(n.useContext)(x),t=e.doctors,c=e.setDoctors,a=Object(n.useRef)(!1),r=Object(n.useRef)(0);console.log("doctor list rendered"),Object(n.useEffect)((function(){window.addEventListener("scroll",s),i()}),[]);var s=function(){document.documentElement.scrollTop>document.documentElement.scrollHeight-1500&&!a.current&&i()},i=function(){var e=Object(u.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.current=!0,e.prev=1,e.next=4,h.get("/name/".concat(r.current,"/ASC"));case 4:0!==(t=e.sent).data.results&&(a.current=!1,c((function(e){return[].concat(Object(p.a)(e),Object(p.a)(t.data.data.doctors))}))),r.current+=40,e.next=11;break;case 9:e.prev=9,e.t0=e.catch(1);case 11:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return Object(o.jsx)("div",{className:"list-group",children:Object(o.jsxs)("table",{className:"table table-hover table-dark",children:[Object(o.jsx)("thead",{children:Object(o.jsxs)("tr",{className:"bg-primary",children:[Object(o.jsx)("th",{scope:"col",children:"Doctor"}),Object(o.jsx)("th",{scope:"col",children:"Company"}),Object(o.jsx)("th",{scope:"col",children:"Price Range"}),Object(o.jsx)("th",{scope:"col",children:"Ratings"}),Object(o.jsx)("th",{scope:"col",children:"Edit"}),Object(o.jsx)("th",{scope:"col",children:"Delete"})]})}),Object(o.jsx)("tbody",{children:t.map((function(e){return Object(o.jsx)(C,{doctor:e,setDoctors:c},e.id)}))})]})})},S=function(){return Object(o.jsxs)("div",{children:[Object(o.jsx)(l,{}),Object(o.jsx)(v,{}),Object(o.jsx)(R,{})]})},k=function(){return Object(o.jsx)(m,{children:Object(o.jsx)("div",{className:"container",children:Object(o.jsx)(s.a,{children:Object(o.jsx)(i.c,{children:Object(o.jsx)(i.a,{exact:!0,path:"/",component:S})})})})})};r.a.render(Object(o.jsx)(k,{}),document.getElementById("root"))}},[[63,1,2]]]);
//# sourceMappingURL=main.2dadd28d.chunk.js.map