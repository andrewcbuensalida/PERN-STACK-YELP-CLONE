(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{63:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c(13),r=c.n(a),s=c(32),o=c(3),i=c(1),l=function(){return Object(i.jsx)("div",{children:Object(i.jsx)("h1",{className:"font-weight-light display-1 text-center",children:"Doctor Database"})})},j=c(4),d=c.n(j),u=c(10),b=c(2),m=c(31),O=c.n(m).a.create({baseURL:"/api/v1/doctors"}),p=c(14),h=Object(n.createContext)(),x=function(e){var t=Object(n.useState)([]),c=Object(b.a)(t,2),a=c[0],r=c[1];return Object(i.jsx)(h.Provider,{value:{doctors:a,setDoctors:r,addDoctors:function(e){r([e].concat(Object(p.a)(a)))}},children:e.children})},v=function(){var e=Object(n.useContext)(h).addDoctors,t=Object(n.useState)(""),c=Object(b.a)(t,2),a=c[0],r=c[1],s=Object(n.useState)(""),o=Object(b.a)(s,2),l=o[0],j=o[1],m=Object(n.useState)("Price Range"),p=Object(b.a)(m,2),x=p[0],v=p[1],f=function(){var t=Object(u.a)(d.a.mark((function t(c){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c.preventDefault(),t.prev=1,t.next=4,O.post("/",{name:a,company:l,price_range:x});case 4:n=t.sent,console.log(n.data.data),e(n.data.data.doctor),r(""),j(""),v("Price Range"),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e){return t.apply(this,arguments)}}();return Object(i.jsx)("div",{className:"mb-4",children:Object(i.jsx)("form",{action:"",children:Object(i.jsxs)("div",{className:"form-row align-items-center  mr-0",children:[Object(i.jsx)("div",{className:"col-sm",children:Object(i.jsx)("input",{value:a,onChange:function(e){return r(e.target.value)},type:"text",className:"form-control",placeholder:"Name"})}),Object(i.jsx)("div",{className:"col-sm",children:Object(i.jsx)("input",{value:l,onChange:function(e){return j(e.target.value)},className:"form-control",type:"text",placeholder:"Company"})}),Object(i.jsx)("div",{className:"col-sm-2 ",children:Object(i.jsxs)("select",{value:x,onChange:function(e){return v(e.target.value)},className:"custom-select my-1 mr-sm-2 ",children:[Object(i.jsx)("option",{disabled:!0,children:"Price Range"}),Object(i.jsx)("option",{value:"1",children:"$"}),Object(i.jsx)("option",{value:"2",children:"$$"}),Object(i.jsx)("option",{value:"3",children:"$$$"}),Object(i.jsx)("option",{value:"4",children:"$$$$"}),Object(i.jsx)("option",{value:"5",children:"$$$$$"})]})}),Object(i.jsx)("button",{onClick:f,type:"submit",className:"btn btn-primary col-sm-2 m-auto  w-25",children:"Add"})]})})})},f=function(e){for(var t=e.rating,c=[],n=1;n<=5;n++)n<=t?c.push(Object(i.jsx)("i",{className:"fas fa-star text-warning"},n)):n!==Math.ceil(t)||Number.isInteger(t)?c.push(Object(i.jsx)("i",{className:"far fa-star text-warning"},n)):c.push(Object(i.jsx)("i",{className:"fas fa-star-half-alt text-warning"},n));return Object(i.jsx)(i.Fragment,{children:c})},g=function(e){var t=e.count,c=e.averageRating;return t?Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(f,{rating:c}),Object(i.jsxs)("span",{className:"text-warning ml-1",children:["(",t,")"]})]}):Object(i.jsx)("span",{className:"text-warning",children:"0 reviews"})},N=c(17),w=function(e){var t=e.isUpdateSeen,c=e.setIsUpdateSeen,a=e.doctor,r=Object(n.useState)(a.name),s=Object(b.a)(r,2),o=s[0],l=s[1],j=Object(n.useState)(a.company),m=Object(b.a)(j,2),p=m[0],h=m[1],x=Object(n.useState)(a.price_range),v=Object(b.a)(x,2),f=v[0],g=v[1],w=function(){var e=Object(u.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),t.stopPropagation(),e.next=4,O.put("/".concat(a.id),{name:o,company:p,price_range:f});case 4:n=e.sent,a.name=n.data.data.doctor.name,a.company=n.data.data.doctor.company,a.price_range=n.data.data.doctor.price_range,c(!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(i.jsx)("div",{onClick:function(e){return e.stopPropagation()},children:Object(i.jsxs)(N.a,{show:t,fullscreen:!0,onHide:function(e){c(!1)},children:[Object(i.jsxs)(N.a.Header,{children:[Object(i.jsx)(N.a.Title,{children:"Update Doctor"}),Object(i.jsx)("button",{onClick:function(e){e.stopPropagation(),c(!1)},type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:Object(i.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(i.jsx)(N.a.Body,{children:Object(i.jsxs)("form",{action:"",children:[Object(i.jsxs)("div",{className:"form-group",children:[Object(i.jsx)("label",{htmlFor:"name",children:"Name"}),Object(i.jsx)("input",{value:o,onChange:function(e){return l(e.target.value)},id:"name",className:"form-control",type:"text"})]}),Object(i.jsxs)("div",{className:"form-group",children:[Object(i.jsx)("label",{htmlFor:"company",children:"Company"}),Object(i.jsx)("input",{value:p,onChange:function(e){return h(e.target.value)},id:"company",className:"form-control",type:"text"})]}),Object(i.jsxs)("div",{className:"form-group col-4",children:[Object(i.jsx)("label",{htmlFor:"rating",children:"Price Range"}),Object(i.jsxs)("select",{value:f,onChange:function(e){return g(e.target.value)},id:"price_range",className:"custom-select",children:[Object(i.jsx)("option",{disabled:!0,children:"Price Range"}),Object(i.jsx)("option",{value:"1",children:"$"}),Object(i.jsx)("option",{value:"2",children:"$$"}),Object(i.jsx)("option",{value:"3",children:"$$$"}),Object(i.jsx)("option",{value:"4",children:"$$$$"}),Object(i.jsx)("option",{value:"5",children:"$$$$$"})]})]}),Object(i.jsx)("button",{type:"submit",onClick:w,className:"btn btn-primary",children:"Submit"})]})})]})})},y=function(e){var t=e.reviews;return Object(i.jsx)("div",{className:"row row-cols-3 mb-2",children:t.map((function(e){return Object(i.jsxs)("div",{className:"card text-white bg-primary mb-3 mr-4",style:{maxWidth:"30%"},children:[Object(i.jsxs)("div",{className:"card-header d-flex justify-content-between",children:[Object(i.jsx)("span",{children:e.name}),Object(i.jsx)("span",{children:Object(i.jsx)(f,{rating:e.rating})})]}),Object(i.jsx)("div",{className:"card-body",children:Object(i.jsx)("p",{className:"card-text",children:e.review})})]},e.id)}))})},$=function(e){var t=e.doctor,c=e.reviews,a=e.setIsReviewSeen,r=e.setReviews,s=e.count,o=e.setCount,l=e.averageRating,j=e.setAverageRating,m=Object(n.useState)(""),h=Object(b.a)(m,2),x=h[0],v=h[1],g=Object(n.useState)(""),N=Object(b.a)(g,2),w=N[0],$=N[1],C=Object(n.useState)("Rating"),R=Object(b.a)(C,2),S=R[0],k=R[1],D=function(){var e=Object(u.a)(d.a.mark((function e(c){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.preventDefault(),e.prev=1,e.next=4,O.post("/".concat(t.id,"/addReview"),{name:x,review:w,rating:S});case 4:n=e.sent,s++,o(s),r((function(e){return[].concat(Object(p.a)(e),[n.data.data.review])})),j((function(e){return e*(s-1)/s+Number(S)*(1/s)})),v(""),k("Rating"),$(""),e.next=16;break;case 14:e.prev=14,e.t0=e.catch(1);case 16:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(i.jsxs)("div",{style:{position:"fixed",left:"0",right:"0",top:"0",bottom:"0",backgroundColor:"grey",padding:"20px",overflowY:"auto",zIndex:"9999",cursor:"default"},children:[Object(i.jsx)("button",{class:"btn btn-danger",onClick:function(e){e.stopPropagation(),a(!1)},children:"\xd7"}),Object(i.jsx)("h1",{className:"text-center display-1",children:t.name}),Object(i.jsxs)("div",{className:"text-center",children:[Object(i.jsx)(f,{rating:l}),Object(i.jsx)("span",{className:"text-warning ml-1",children:"(".concat(s||0,")")})]}),Object(i.jsx)("div",{className:"mt-3",children:Object(i.jsx)(y,{reviews:c})}),Object(i.jsx)("div",{className:"mb-2",children:Object(i.jsxs)("form",{action:"",children:[Object(i.jsxs)("div",{className:"form-row",children:[Object(i.jsxs)("div",{className:"form-group col-8",children:[Object(i.jsx)("label",{htmlFor:"name",children:"Name"}),Object(i.jsx)("input",{value:x,onChange:function(e){return v(e.target.value)},id:"name",placeholder:"name",type:"text",className:"form-control"})]}),Object(i.jsxs)("div",{className:"form-group col-4",children:[Object(i.jsx)("label",{htmlFor:"rating",children:"Rating"}),Object(i.jsxs)("select",{value:S,onChange:function(e){return k(e.target.value)},id:"rating",className:"custom-select",children:[Object(i.jsx)("option",{disabled:!0,children:"Rating"}),Object(i.jsx)("option",{value:"1",children:"1"}),Object(i.jsx)("option",{value:"2",children:"2"}),Object(i.jsx)("option",{value:"3",children:"3"}),Object(i.jsx)("option",{value:"4",children:"4"}),Object(i.jsx)("option",{value:"5",children:"5"})]})]})]}),Object(i.jsxs)("div",{className:"form-group",children:[Object(i.jsx)("label",{htmlFor:"Review",children:"Review"}),Object(i.jsx)("textarea",{value:w,onChange:function(e){return $(e.target.value)},id:"Review",className:"form-control"})]}),Object(i.jsx)("button",{type:"submit",onClick:D,className:"btn btn-primary",children:"Submit"})]})})]})};var C=function(e){var t=e.doctor,c=(e.setDoctors,Object(n.useState)(!1)),a=Object(b.a)(c,2),r=a[0],s=a[1],o=Object(n.useState)(null),l=Object(b.a)(o,2),j=l[0],m=l[1],p=Object(n.useState)(!0),h=Object(b.a)(p,2),x=h[0],v=h[1],f=Object(n.useState)(!1),N=Object(b.a)(f,2),y=N[0],C=N[1],R=Object(n.useState)(!1),S=Object(b.a)(R,2),k=S[0],D=S[1],P=Object(n.useState)([]),_=Object(b.a)(P,2),E=_[0],F=_[1];t.count=t.count||0;var I=Object(n.useState)(Number(t.count)),U=Object(b.a)(I,2),A=U[0],H=U[1];t.average_rating=t.average_rating||0;var L=Object(n.useState)(Number(t.average_rating)),B=Object(b.a)(L,2),J=B[0],T=B[1];Object(n.useEffect)((function(){var e=function(){var e=Object(u.a)(d.a.mark((function e(){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.get("/".concat(t.id));case 3:c=e.sent,F(c.data.data.reviews),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),m(e.t0);case 10:return e.prev=10,s(!0),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);var z=function(){var e=Object(u.a)(d.a.mark((function e(t,c){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.stopPropagation(),e.prev=1,v(!1),e.next=5,O.delete("/".concat(c));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,c){return e.apply(this,arguments)}}();return console.log("individual rendered"),j?Object(i.jsxs)("div",{children:["Error: ",j.message]}):r?x&&Object(i.jsxs)("tr",{id:t.id,style:{cursor:"pointer"},onClick:function(e){D(!0)},class:"row no-gutters pl-5",children:[k&&Object(i.jsx)($,{setIsReviewSeen:D,doctor:t,reviews:E,setReviews:F,count:A,setCount:H,averageRating:J,setAverageRating:T}),Object(i.jsx)("td",{class:"col-md-2 col-sm-4  ",children:t.name}),Object(i.jsx)("td",{class:"col-md-2 col-sm-4  pr-2",children:t.company}),Object(i.jsx)("td",{class:"col-md-2 col-sm-4  ",children:"$".repeat(t.price_range)}),Object(i.jsx)("td",{class:"col-md-2 col-sm-4  ",children:Object(i.jsx)(g,{count:A,averageRating:J})}),Object(i.jsxs)("td",{class:"col-md-2 col-sm-4  ",children:[Object(i.jsx)("button",{onClick:function(e){return function(e){e.stopPropagation(),C(!0)}(e)},className:"btn btn-warning",children:"Edit info"}),y&&Object(i.jsx)(w,{isUpdateSeen:y,setIsUpdateSeen:C,doctor:t})]}),Object(i.jsx)("td",{class:"col-md-2 col-sm-4  ",children:Object(i.jsx)("button",{onClick:function(e){return z(e,t.id)},className:"btn btn-danger",children:"Delete"})})]},t.id):Object(i.jsx)("h4",{children:"Loading..."})},R=function(){var e=Object(n.useContext)(h),t=e.doctors,c=e.setDoctors,a=Object(n.useRef)(!1),r=Object(n.useRef)(0);console.log("doctor list rendered"),Object(n.useEffect)((function(){window.addEventListener("scroll",s),o()}),[]);var s=function(){document.documentElement.scrollTop>document.documentElement.scrollHeight-1500&&!a.current&&o()},o=function(){var e=Object(u.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.current=!0,e.prev=1,e.next=4,O.get("/name/".concat(r.current,"/ASC"));case 4:0!==(t=e.sent).data.results&&(a.current=!1,c((function(e){return[].concat(Object(p.a)(e),Object(p.a)(t.data.data.doctors))}))),r.current+=40,e.next=11;break;case 9:e.prev=9,e.t0=e.catch(1);case 11:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return Object(i.jsx)("div",{className:"list-group",children:Object(i.jsxs)("table",{className:"table table-hover table-dark table-striped table-sm table-borderless ",children:[Object(i.jsxs)("tr",{className:"bg-info row no-gutters pl-5 ",children:[Object(i.jsx)("th",{scope:"col",class:"col-md-2 col-sm-4 ",children:"Doctor"}),Object(i.jsx)("th",{scope:"col",class:"col-md-2 col-sm-4 ",children:"Company"}),Object(i.jsx)("th",{scope:"col",class:"col-md-2 col-sm-4 ",children:"Price"}),Object(i.jsx)("th",{scope:"col",class:"col-md-2 col-sm-4 ",children:"Rating"}),Object(i.jsx)("th",{scope:"col",class:"col-md-2 col-sm-4 ",children:"Edit info"}),Object(i.jsx)("th",{scope:"col",class:"col-md-2 col-sm-4 ",children:"Delete"})]}),Object(i.jsx)("tbody",{children:t.map((function(e){return Object(i.jsx)(C,{doctor:e,setDoctors:c},e.id)}))})]})})},S=function(){return Object(i.jsxs)("div",{children:[Object(i.jsx)(l,{}),Object(i.jsx)(v,{}),Object(i.jsx)(R,{})]})},k=function(){return Object(i.jsx)(x,{children:Object(i.jsx)("div",{className:"container",children:Object(i.jsx)(s.a,{children:Object(i.jsx)(o.c,{children:Object(i.jsx)(o.a,{exact:!0,path:"/",component:S})})})})})};r.a.render(Object(i.jsx)(k,{}),document.getElementById("root"))}},[[63,1,2]]]);
//# sourceMappingURL=main.4376b8e9.chunk.js.map